/*!
 * clickLinkFormat - 修改提供給部落客的網址參數，為了能在點擊時傳送資訊到電商報表 #70728
 * by PIXNET 產品組前端 Jammie
 * 廣告 repo: https://git.pixnet.systems/pixnet/pixfalcon-front
 * js檔案位置: https://git.pixnet.systems/pixnet/pixfalcon-front/src/branch/master/webroot/asset/js/clickLinkFormat.src.js
 */
!function(){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var e=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(t,[{key:"getClickDate",value:function(){var e=new Date;return""+String(e.getFullYear()).substr(2)+("0"+(e.getMonth()+1)).slice(-2)+("0"+e.getDate()).slice(-2)}},{key:"getSource",value:function(){return function(e){var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}("utm_source")}},{key:"getCookieId",value:function(){return window.encodeURIComponent(function(e){var t=("; "+document.cookie).split("; "+e+"=");return 2!==t.length?"":t.pop().split("; ").shift()}("_pta"))}},{key:"getClickId",value:function(){return function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=n.length,o=0;o<e;o++)t+=n.charAt(Math.floor(Math.random()*r));return t}(40)}},{key:"getClickUrl",value:function(){return window.btoa(location.href)}},{key:"format",value:function(){var n={CLICK_DATE:this.getClickDate(),COOKIE:this.getCookieId(),CLICK_ID:this.getClickId(),CLICK_URL:this.getClickUrl(),SOURCE:this.getSource()};this.links=document.querySelectorAll(".article-body a"),[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.links)).forEach(function(t,e){Object.keys(n).forEach(function(e){t.href=t.href.replace(new RegExp("__#"+e+"#__","g"),n[e])})})}}]),t);function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.links=[]}"loading"!==document.readyState?(new e).format():document.addEventListener("DOMContentLoaded",function(){(new e).format()})}();