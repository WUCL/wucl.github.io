<!DOCTYPE html>
<html lang="zh-Hant">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>This is TITLE</title>
        <meta name="keywords" content="" />
        <meta name="description" content="" />
        <meta property="og:url" content="" />
        <meta property="og:type" content="website" />
        <meta property="og:title" content="" />
        <meta property="og:description" content="" />
        <meta property="og:image" content="" />

        <!-- <link rel="shortcut icon" href="assets/favicon.ico" type="image/x-icon" /> -->
        <!-- <link rel="icon" type="image/png" href="./favicon.png" /> -->
        <link rel="icon" type="image/png" href="./favicon.ico" />
        <!-- <link href="https://fonts.googleapis.com/css?family=Noto+Sans+TC:300,400,500&amp;subset=chinese-traditional" rel="stylesheet"> -->
        <!-- <link href="https://fonts.googleapis.com/css?family=Noto+Serif+TC:300,400,500,700,900&amp;subset=chinese-traditional" rel="stylesheet"> -->
        <!-- <link href="https://fonts.googleapis.com/css?family=Oswald:300,400&display=swap" rel="stylesheet"> -->
		<!-- <link rel="stylesheet" type="text/css" href="./public/lib/colorbox/colorbox.min.css" /> -->
		<!-- <link rel="stylesheet" type="text/css" href="./public/lib/slick/slick.css" /> -->
		<!-- <link rel="stylesheet" type="text/css" href="./public/lib/swiper/swiper.min.css" /> -->
		<link rel="stylesheet" type="text/css" href="./public/lib/aos/aos.css" />
        <link rel="stylesheet" type="text/css" href="./public/css/style.min.css" />
	</head>
	<body>
        <header id="header" class="header">
        	This is HEADER
        </header>
		<main id="main" class="main">
		    <section id="makePic" class="makePic" data-scroll-index="1">
		        <div class="inner">
		            <!-- <div class="img-list">
		                <div><img class="compose" src="https://fakeimg.pl/300x300/" alt="" /></div>
		                <div><img class="compose" src="https://fakeimg.pl/500x500/" alt="" /></div>
		            </div>
		            <canvas id="stockGraph" width="150" height="150"></canvas> -->
		            <img id="img-a" class="compose" src="https://fakeimg.pl/200x200/" alt="" />

		            <img id="img-b" class="compose" src="https://fakeimg.pl/100x100/000000/ffffff/" alt="" />
		            <img id="img-c">

		            <canvas id="canvas" width="100" height="100"></canvas>
		            <a id="merge" href="javascript:;">合併</a>
		            <!-- <a id="dl" href="javascript:;" download="dl.png">下載</a> -->
		            <a id="dl" href="#" download="dl.png">下載</a>


		            <script>
		                var canvas = document.getElementById('canvas'),
		                    context = canvas.getContext('2d'),
		                    image = new Image(),
		                    image_b = new Image(),
		                    image_c = new Image(),
		                    base64 = '';
                
		                image_c = document.getElementById('img-c');
		                image_c.setAttribute("crossOrigin", 'Anonymous');

		                // image_b.src = document.getElementById('img-b').src;

		                var btn_dl = document.getElementById('dl'),
		                    btn_merge = document.getElementById('merge');
		                // console.log(dl);
		                btn_merge.onclick = function() {
		                    image.src = document.getElementById('img-a').src;
		                    image_b.src = document.getElementById('img-b').src;
		                    image.setAttribute("crossOrigin", 'Anonymous');
		                    image_b.setAttribute("crossOrigin", 'Anonymous');
		                    image.onload = function() {
		                        console.log(image);
		                        console.log(this);
		                        var w = this.width, h = this.height;


		                        canvas.width = w;
		                        canvas.height = h;
		                        context.drawImage(this, 0, 0, w, h);
		                        context.drawImage(image_b, 0, 0, image_b.width, image_b.height);

		                        context.font="30px 微軟正黑體";
		                        context.fillText('你好我阿倫', 50, 50);

		                        console.log(canvas);
		                        base64 = canvas.toDataURL("image/png"); 
		                        console.log(base64);
		                        image_c.src = base64;
		                    }

		                    // btn_dl.href = canvas.toDataURL();
		                    // console.log('btn_dl: ' + btn_dl.href);

		                    // image.onload = function() {
		                    // }
		                }

		                btn_dl.onclick = function() {
		                    console.log(base64);
		                    btn_dl.href = base64;
		                }
		            </script>
		        </div>
		    </section>
		</main>
		<footer id="footer" class="footer">
			<section class="copyright">
				<span>Copyright © 2003 - 2020</span>
				<span><a href="https://www.pixnet.net"><img src="./public/img/logo-pixnet-white.svg" align="absmiddle"></a></span>
				<span>優像數位媒體科技 ( 股 ) 公司</span>
			</section>
		</footer>
        <aside id="aside" class="aside">
        </aside>

		<script src="./public/lib/jquery/1.12.4/jquery.min.js"></script>

		<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script> -->
		<script src="https://github.com/niklasvh/html2canvas/releases/download/0.4.1/html2canvas.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.0/FileSaver.min.js"></script>

		<script src="./public/js/custom/eventdevice.js"></script>

		<!-- development version, includes helpful console warnings -->
		<!-- <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script> -->
		<!-- production version, optimized for size and speed -->
		<!-- <script src="https://cdn.jsdelivr.net/npm/vue"></script> -->

		<!-- <script src="https://cdn.jsdelivr.net/npm/vue-scrollto"></script> -->
		<!-- <script src="https://cdn.jsdelivr.net/npm/vue-modaltor"></script> -->

		<!-- <script src="./public/lib/scrollIt/scrollIt.js"></script> -->
		<!-- <script src="./public/lib/aos/aos.js"></script> -->
		<!-- <script src="./public/lib/colorbox/jquery.colorbox.js"></script> -->
		<!-- <script src="./public/lib/slick/slick.min.js"></script> -->
		<!-- <script src="./public/lib/swiper/swiper.min.js"></script> -->

		<script src="./public/js/main.js"></script>
	</body>
</html>